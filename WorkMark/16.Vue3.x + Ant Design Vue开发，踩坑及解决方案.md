# Vue3.x + Ant Design Vue开发，踩坑及解决方案

作者：罗永梅
时间：2020 年 11 月 10 日

### 一.Vue3中Mixins由Composition API替代
```js
// common/index.js
import { Modal, message } from "ant-design-vue";
import router from "@/router";
import store from "@/store";

export default function() {
  // 建设提示语
  function showDevMoadl() {
    Modal.info({
      title: "温馨提示",
      centered: true,
      content: "功能建设中，敬请期待"
    });
  }
  function toPage(name) {
    router.push({ name });
  }
  // 注销账号
  async function logout() {
    try {
      await store.dispatch("user/logout");
      await store.dispatch("permission/generateRoutes", null);
      message.success("您已退出该系统");
      toPage("Home");
    } catch (err) {
      console.log(err);
      toPage("Home");
    }
  }

  return {
    showDevMoadl,
    logout,
    toPage
  };
}
```
```html
<div class="wrapper-container flex">
  <div class="top-container-left">
    <span class="link flex" @click="showDevMoadl">
      <MailOutlined />
      <span>意见反馈</span>
    </span>
  </div>
  <div class="top-container-right">
    <span class="top-container-right-item link" @click="toPage('About')">
      关于我们
      <RightOutlined />
    </span>
    <span class="top-container-right-item link" @click="toPage('Contact')">
      联系方式
      <RightOutlined />
    </span>
  </div>
</div>
```
```js
// AppTop.vue
import common from "common/index.js";

export default {
  name: "AppTop",
  setup() {
    const { showDevMoadl, toPage } = common();
    return {
      showDevMoadl,
      toPage
    }
  }
};
```

### 一.ant-design-vue使用ConfigProvider全局配置中文
解决方案：  
```html
<template>
  <a-config-provider :locale="locale">
    <App />
  </a-config-provider>
</template>

<script>
  import zhCN from 'ant-design-vue/es/locale/zh_CN';
  export default {
    data() {
      return {
        locale: zhCN,
      };
    },
  };
</script>
```
* 配置完需要清除浏览器缓存才能看到效果