# 微信小程序原生开发，踩坑及解决方案

作者：罗永梅
时间：2021 年 01 月 20 日

### 一、微信小程序自定义tabbar(原生tabbar闪烁显示)
微信小程序给出的原生tabbar难以满足公司产品的需求，自定义tabbar使用后，即调用wx.hideTabBar()隐藏原生tabbar会闪烁。

解决方案：  
在 app.json 中的 tabBar 项指定 custom 字段为"true"：  
```json
{
  "tabBar": {
    "custom": true
  },
```


### 二、微信小程序自定义tabbar兼容iPhoneX
自定义的tabbar在iPhoneX下会被挡住一截，可以通过css来修改:

```css
.tabbar{
  height: 50px;  // tabbar高度
}

.page-container.has-tabbar{
  padding-bottom: 50px; // 页面距离底部空出tabbar高度
}

// 兼容iPhoneX
@supports (bottom: constant(safe-area-inset-bottom)) or
  (bottom: env(safe-area-inset-bottom)) {
  .page-container.has-tabbar {
    padding-bottom: calc(env(safe-area-inset-bottom) + 50px); // iPhoneX底部原来的高度+tabbar高度
  }
}

```

### 三、微信小程序使用less
1. 在vscode里面下载插件 Easy-ess
2. 在vscode里面打开设置找到Easy LESS config，在setings.json中编辑  
![Image text](images/wxss-2.jpg)

```json
"less.compile": {
    "outExt": ".wxss" // 输出文件的后缀,默认为.css
  }
```
这样在wxss同级的创建一个.less的文件，编辑该文件并保存后，自动会生成或修改同名的.wxss文件。  

![Image text](images/wxss-1.jpg)

### 三、微信小程序去除Button边框
button默认有边框，css使用 border: none去掉不可以，边框依然存在，改用button::after{ border: none; } 来去除边框