# 基于 Egg + Vue + Webpack 服务端渲染开发企业网站，踩坑及解决方法

作者：罗永梅  
时间：2019年02月12日

基于公司需求，使用基于 Egg + Vue + Webpack 服务端渲染技术开发企业网站

官方文档地址：https://eggjs.org/zh-cn/intro/index.html

### 一、全局安装egg

egg 需要 Node.js 8.x以上版本。  

在终端输入以下命令:  

> npm i egg-init -g

### 二、安装easywebpack-cli手脚架

使用手脚架快速生成项目：

> npm install easywebpack-cli -g  
> cd 你的项目地址  
> easywebpack init

选择 egg+vue server side render boilerplate 初始化骨架项目：

![Image text](images/egg-1.jpg)

安装依赖：
> npm install

启动项目：

> npm run dev / egg-bin dev

相关文档地址：https://www.yuque.com/easy-team/egg-vue/init

### 三、目录结构 

完整的目录结构：https://eggjs.org/zh-cn/basics/structure.html

### 四、安装sequelize
sequelize 是 Node.js 社区比较流行的一个 ORM 框架
官方相关文档：http://docs.sequelizejs.com/
中文API文档：https://itbilu.com/nodejs/npm/VkYIaRPz-.html

安装sequelize模块：  
> npm install --save sequelize

安装sqlite驱动模块：  
> npm install --save sqlite3  

建立链接：
```
var sequelize = new Sequelize('database', 'username', 'password', {
  host: 'localhost',
  dialect: 'mysql'|'mariadb'|'sqlite'|'postgres'|'mssql',

  pool: {
    max: 5,
    min: 0,
    idle: 10000
  },

  // 仅 SQLite 适用
  storage: 'path/to/database.sqlite'
});

// 或者可以简单的使用一个连接 uri
var sequelize = new Sequelize('postgres://user:pass@example.com:5432/dbname');
```